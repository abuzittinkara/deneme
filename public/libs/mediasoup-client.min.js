/*! For license information please see mediasoup-client.min.js.LICENSE */
/*! mediasoup-client v3.6.45 - (git+https://github.com/versatica/mediasoup-client.git) - 2023-08-28T10:00:00.000Z */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("crypto")):"function"==typeof define&&define.amd?define(["crypto"],t):(e=e||self).mediasoupClient=t(e.crypto)}(this,function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(Array.isArray(e))return e}function c(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError('attempted to use private field on non-instance');return e}function f(e,t,n){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError('attempted to use private field on non-instance');return e[t]=n,n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance")}return(n=n.call(e)).next.bind(n)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){return Object.keys(e).length===Object.getOwnPropertyNames(e).length}function y(e){return!(null===e||"object"!=typeof e)&&("MediaStream"===e.toString().slice(8,-1)||"MediaStream"===(null===e||void 0===e?void 0:e.constructor.name))}function b(e){return y(e)}function w(e){return!("string"!=typeof e||!e.startsWith("urn:ietf:params:rtp-hdrext:"))}function S(e){return"audio"===e||"video"===e}function E(){return!!n.default}function _(e){return null!=e&&"function"==typeof e.getCapabilities&&"function"==typeof e.generateCertificate}function O(e,t){e.addEventListener("track",t),e.addEventListener("connectionstatechange",t),e.addEventListener("iceconnectionstatechange",t),e.addEventListener("icecandidate",t),e.addEventListener("negotiationneeded",t),e.addEventListener("signalingstatechange",t)}function T(e,t){e.removeEventListener("track",t),e.removeEventListener("connectionstatechange",t),e.removeEventListener("iceconnectionstatechange",t),e.removeEventListener("icecandidate",t),e.removeEventListener("negotiationneeded",t),e.removeEventListener("signalingstatechange",t)}function A(e,t){var n=!1;if(e.getTracks().forEach(function(e){e.addEventListener("ended",function(){n||(n=!0,t())})}),"ended"===e.readyState&&!n){n=!0,t()}}function C(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i,m=g(n);!(i=m()).done;){var l=i.value;if(e[l]!==t[l])return!1}return!0}function x(e,t,n){if(!b(e))throw new TypeError("stream is not a MediaStream");if(!S(t))throw new TypeError('invalid kind "'+t+'"');if(!Number.isFinite(n)||n<1)throw new TypeError('invalid spatialLayers "'+n+'"')}function k(e){return void 0!==e.sdpMid}function L(e){return"audio"===e||"video"===e?"recvonly"===e||"sendonly"===e||"sendrecv"===e:"inactive"===e||"recvonly"===e||"sendonly"===e||"sendrecv"===e}function R(e){return!(!e||"object"!=typeof e)&&null!==e.userData}function P(e){var t=e.mid||e.sdpMid,n=e.direction||"";return{kMid:t,kDirection:n}}function N(e){return"function"==typeof e}function I(e){try{return new e("test")}catch(e){}return!1}function D(e,t){var n="";if((null==t?void 0:t.focus)===e.mid&&(n="a=mid:"+e.mid+"\r\n"+"a=extmap-allow-mixed\r\n"),"inactive"===e.direction)n+="a=inactive\r\n";else if("recvonly"===e.direction)n+="a=recvonly\r\n";else if("sendonly"===e.direction)n+="a=sendonly\r\n";else if("sendrecv"===e.direction)n+="a=sendrecv\r\n";return n}function M(e,t){var n="";return e.codecs.forEach(function(e){var r=e.mimeType.toLowerCase();if(t?r.startsWith("video/"):r.startsWith("audio/")){var i=e.payloadType,o="a=rtpmap:"+i+" "+r.replace("video/","").replace("audio/","")+"/"+(e.clockRate||90000);e.channels>1&&(o+="/"+e.channels),o+="\r\n",n+=o,e.parameters&&Object.keys(e.parameters).forEach(function(t){var r=e.parameters[t];if(!0===r)n+="a=fmtp:"+i+" "+t+"\r\n";else if(void 0!==r)n+="a=fmtp:"+i+" "+t+"="+String(r)+"\r\n"}),void 0!==e.rtcpFeedback&&e.rtcpFeedback.forEach(function(t){n+="a=rtcp-fb:"+i+" "+t.type+(t.parameter?" "+t.parameter:"")+"\r\n"})}}),n}function U(e,t,n){var r=e.codecs.find(function(e){return e.payloadType===t});if(!r)return"";var i=r.parameters,o="a=fmtp:"+t+" ";return Object.keys(i).forEach(function(e){if(!0===i[e])o+=e+";";else if(void 0!==i[e])o+=e+"="+String(i[e])+";"}),o+="\r\n"}function B(e,t){var n="";return e.headerExtensions&&e.headerExtensions.forEach(function(e){if(e.uri&&w(e.uri)){var r=e.preferredId||0;if(0!==r){var i="a=extmap:"+r;e.direction&&"sendrecv"!==e.direction&&(i+="/"+e.direction),n+="".concat(i," ").concat(e.uri).concat(e.preferredEncrypt?" encrypt":"","\r\n")}}}),n}function F(e,t,n){var r="",i="a=rtcp:9 IN IP4 0.0.0.0\r\n";return e.rtcp.cname&&(i+="a=ssrc:"+t+" cname:"+e.rtcp.cname+"\r\n"),!0===e.rtcpReducedSize?i+="a=rtcp-rsize\r\n":!0===e.compressionSf?i+="a=rtcp-webrtc-fb\r\n":n&&(i+="a=rtcp-mux\r\n"),r+=i,r}function G(e,t,n){var r="";return e.rtcp.feedback&&e.rtcp.feedback.forEach(function(r){n&&"remb"===r.type&&(t?e.senderJitterBufferDelay&&(n.sdp+="a=rtcp-fb:"+t+" "+r.type+"\r\n"):n.sdp+="a=rtcp-fb:* "+r.type+"\r\n")}),r}function z(e,t){return e.direction===t}function H(e,t,n){for(var r="",i=0;i<t;i++){var o="a=ssrc:"+e+" label:mslabel\r\n",s="a=ssrc:"+e+" label:".concat(n.label,"\r\n");r+=o+s}return r}function j(e,t,n){var r=n.track?" trackid=".concat(n.track):"",i="a=ssrc:".concat(e).concat(r,"\r\n"),o="a=ssrc:".concat(e," cname:").concat(n.rtcp.cname,"\r\n");return i+o}function Y(e){if(!e)return[];var t=[];return e.headerExtensions&&e.headerExtensions.forEach(function(e){var n=e.preferredId||0,r=e.uri;if(r&&w(r)){var i=e.preferredEncrypt?!0:!1;t.push({id:n,uri:r,encrypt:i,direction:e.direction})}}),t}function q(e){return{codecs:function(e){var t=[];return e.codecs.forEach(function(e){var n=i({},e);n.mimeType=e.mimeType.toLowerCase();var r=n.clockRate||90000;n.channels=n.channels||1,n.parameters=n.parameters||{},n.rtcpFeedback=n.rtcpFeedback||[],n.payloadType=e.payloadType,n.kind=e.kind||("video"===n.mimeType.split("/")[0]?"video":"audio"),n.preferredPayloadType=e.payloadType||0,n.clockRate=r,t.push(n)}),t}(e),headerExtensions:Y(e),fecMechanisms:[],rtcp:{cname:"",reducedSize:!1,compressionSf:!1}}}function V(e,t){var n=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"balanced",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),r=[];return{pc:n,sdp:"",localSdpObject:void 0,transceivers:r,senders:new Map,receivers:new Map,kind2Stream:new Map,streamId:t||"",promise:new Promise(function(e){n.addEventListener("icecandidate",function(t){t.candidate||e()})}),sdpMidCounter:0}}function X(e){var t=e.sdpObject;if(!t||!t.media)throw new TypeError("Invalid SDP object");var n=[];return t.media.forEach(function(e){if(e.mid){var t=e.mid;z(e,"sendrecv")||z(e,"sendonly")?n.push({mid:t,kind:e.type}):z(e,"recvonly")||z(e,"inactive")||z(e,"sendrecv")||z(e,"sendonly")||z(e,"sendrecv")}}),n}function W(e,t){if(!t)return e;var n=i({},e,{preferredPayloadType:t});return n.kind||(n.kind="video"),n}function K(e,t){if("inactive"===e.direction){var n=e.rejected;n||c(e.msid)&&(c(e.msid)?e.direction="recvonly":(e.msid="*",e.direction="sendrecv")),e.rejected=!1}e.msid=t?(t.stream||"")+""+(t.track?(" "+t.track.id).trim():""):" *"}function Z(e,t){if(!S(e))throw new TypeError('invalid kind "'+e+'"');var n={mid:void 0,kind:e,closed:!1,rtpParameters:{codecs:[],headerExtensions:[],rtcp:{cname:"",reducedSize:!0},encodings:[]},direction:"sendrecv",sendEncodings:void 0,recvEncodingParameters:void 0,scalabilityMode:"",workerIndex:0,rtpParametersUpdates:[],remoteRtpParameters:void 0,remoteRtxSsrc:void 0};return t?Object.assign(n,t):n}function Q(e,t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];n.push(W(o,e))}return n}function $(e){var t=e.extendedRtpCapabilities||{},n=[];return t.headerExtensions&&(n=t.headerExtensions.filter(function(e){return e.direction&&"sendrecv"===e.direction||"sendonly"===e.direction})),n}function ee(e){var t=e.extendedRtpCapabilities||{},n=[];return t.headerExtensions&&(n=t.headerExtensions.filter(function(e){return e.direction&&"sendrecv"===e.direction||"recvonly"===e.direction})),n}function te(e){var t={},n=Object.keys(e),r=Array.isArray(e)?n.map(function(t){return Number(t)}):void 0;return r&&(n=r.map(String)),n.forEach(function(n){var r=e[n];t[n]=b(r)?te(r):r}),t}function ne(e,t){if(!e.codecs||!e.codecs.length)throw new TypeError("invalid RtpCapabilities (missing codecs)");if(!t.codecs||!t.codecs.length)throw new TypeError("invalid RtpCapabilities (missing codecs)");for(var r=[],i=[],o=m(e.codecs);;){var s;if((s=o()).done)break;var a=s.value;if("rtx"!==a.mimeType.toLowerCase()){var c=re(a,t.codecs);if(c){var u={mimeType:a.mimeType,kind:a.kind,clockRate:a.clockRate,channels:a.channels,localPayloadType:void 0,remotePayloadType:c.payloadType,rtcpFeedback:oe(a.rtcpFeedback,c.rtcpFeedback),parameters:i({},a.parameters,ce(c.parameters))};u.localPayloadType=a.payloadType,u.remotePayloadType=c.payloadType,r.push(u);var l=re({mimeType:"rtx",parameters:{apt:a.payloadType}},e.codecs),d=re({mimeType:"rtx",parameters:{apt:c.payloadType}},t.codecs);if(l&&d){var f={mimeType:"rtx",kind:a.kind,clockRate:a.clockRate,channels:a.channels,localPayloadType:l.payloadType,remotePayloadType:d.payloadType,rtcpFeedback:[],parameters:{apt:u.localPayloadType}};r.push(f)}}}}for(var h=m(e.codecs);;){var p;if((p=h()).done)break;var g=p.value;if("rtx"===g.mimeType.toLowerCase()){var v=re({mimeType:"rtx",parameters:{apt:g.parameters.apt}},t.codecs);if(v&&!re({mimeType:v.parameters.apt},r)){var y=re({mimeType:v.parameters.apt},t.codecs);if(y){var b=re({mimeType:y.payloadType},r);if(b){var w={mimeType:"rtx",kind:b.kind,clockRate:b.clockRate,channels:b.channels,localPayloadType:g.payloadType,remotePayloadType:v.payloadType,rtcpFeedback:[],parameters:{apt:b.localPayloadType}};r.push(w)}}}}}var S={headerExtensions:ie(e.headerExtensions||[],t.headerExtensions||[])};return{codecs:r,headerExtensions:S.headerExtensions,fecMechanisms:[]}}function re(e,t){if("number"==typeof e.payloadType){var n=t.find(function(t){return t.payloadType===e.payloadType});if(n&&se(e,n))return n}else{var r=t.find(function(t){return se(e,t)});if(r)return r}}function ie(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r],s=t.find(function(e){return e.uri===o.uri});if(s){var a=ee(o,s.direction,s.encrypt),c=ee(s,o.direction,s.encrypt),u=oe(o.rtcpFeedback,s.rtcpFeedback);n.push({kind:o.kind,direction:a,uri:o.uri,preferredId:o.preferredId,preferredEncrypt:o.preferredEncrypt,encrypt:o.encrypt,rtcpFeedback:u,sendEncoding:!1})}}return n}function oe(e,t){var n=[];return e.forEach(function(e){var r=t.find(function(t){return t.type===e.type&&t.parameter===e.parameter});r&&n.push(r)}),n}function se(e,t){return e.mimeType.replace(/ /g,"").toLowerCase()===t.mimeType.replace(/ /g,"").toLowerCase()&&e.clockRate===t.clockRate&&e.channels===t.channels}function ae(e){for(var t=[],n=0,r=e.codecs.length;n<r;n++){var i=e.codecs[n];if("rtx"!==i.mimeType.toLowerCase()){var o={mimeType:i.mimeType,kind:i.kind,clockRate:i.clockRate,channels:i.channels,payloadType:i.remotePayloadType,rtcpFeedback:i.rtcpFeedback,parameters:i.parameters};if(o.parameters=ce(o.parameters),t.push(o),null!=i.localPayloadType&&null!=i.remotePayloadType&&i.localPayloadType!==i.remotePayloadType){var s=re({mimeType:"rtx",parameters:{apt:i.localPayloadType}},e.codecs);if(s&&"rtx"===s.mimeType.toLowerCase()&&void 0!==s.remotePayloadType&&void 0!==s.parameters.apt){var a={mimeType:"rtx",kind:i.kind,clockRate:i.clockRate,channels:i.channels,payloadType:s.remotePayloadType,rtcpFeedback:[],parameters:{apt:o.payloadType}};t.push(a)}}}}return t}function ce(e){var t={};return Object.keys(e).forEach(function(n){if(!0===e[n])t[n]=!0;else if(void 0!==e[n]){var r=String(e[n]);t[n]=r}}),t}function ue(e,t,n){if(!t||!t.length)return e;var r={codecs:[],headerExtensions:e.headerExtensions,fecMechanisms:[]},i=m(e.codecs);a:for(;;){var o;if((o=i()).done)break;var s=o.value;if("rtx"===s.mimeType.toLowerCase())continue;for(var c=m(t);;){var u;if((u=c()).done)break;var l=u.value;if(l.mimeType.replace(/ /g,"").toLowerCase()===s.mimeType.replace(/ /g,"").toLowerCase()&&l.clockRate===s.clockRate&&(l.channels===s.channels||(!l.channels||1===l.channels)||(1===l.channels||!l.channels))){var d=i({},s);if(d.payloadType=l.payloadType,d.parameters=i({},d.parameters,ce(l.parameters)),d.rtcpFeedback=oe(d.rtcpFeedback,l.rtcpFeedback),r.codecs.push(d),n){var f=e.codecs.find(function(e){return"rtx"===e.mimeType.toLowerCase()&&e.parameters.apt===s.payloadType}),h=t.find(function(e){return"rtx"===e.mimeType.toLowerCase()&&e.parameters.apt===l.payloadType});if(f&&h){var p=i({},f);p.payloadType=h.payloadType,p.parameters={apt:d.payloadType},r.codecs.push(p)}}continue a}}}return r}function le(e,t){var n=[];return e.headerExtensions&&e.headerExtensions.forEach(function(e){if(("sendrecv"===e.direction||"sendonly"===e.direction)&&t.find(function(t){return t.kind===e.kind&&t.uri===e.uri}))n.push(e)}),n}function de(e,t){var n=[];return e.headerExtensions&&e.headerExtensions.forEach(function(e){if(("sendrecv"===e.direction||"recvonly"===e.direction)&&t.find(function(t){return t.kind===e.kind&&t.uri===e.uri}))n.push(e)}),n}function fe(e){if(!(this instanceof fe))throw new TypeError("Cannot call a class as a function");return this._handlerName="unknown",this._loaded=!1,this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduce={audio:!1,video:!1},this._sctpCapabilities=void 0,void 0!==e&&this.load(e),this}fe.prototype.load=function(e){if(this._loaded)throw new Error("already loaded");var t=e.handlerName||"Chrome70";try{var r=require("./handlers/"+t+"Handler.js");this._handlerName=t,this._handlerFactory=function(){return new r}}catch(r){throw new Error('unknown handlerName "'+t+'"')}var i=this._handlerFactory(),o=i.getNativeRtpCapabilities();if(!o)throw new Error("no native RTP capabilities");var s=e.routerRtpCapabilities;if(!s)throw new TypeError("missing routerRtpCapabilities");var a=ne(o,s);this._extendedRtpCapabilities=a,this._recvRtpCapabilities=ae(a),this._canProduce.audio=function(e){return e.some(function(e){return"audio"===e.kind&&"send"===e.direction})}(a.codecs),this._canProduce.video=function(e){return e.some(function(e){return"video"===e.kind&&"send"===e.direction})}(a.codecs),e.sctpCapabilities&&(this._sctpCapabilities=e.sctpCapabilities),this._loaded=!0},fe.prototype.getNativeRtpCapabilities=function(){if(!this._loaded)throw new Error("not loaded");return this._handlerFactory().getNativeRtpCapabilities()},fe.prototype.canProduce=function(e){if(!this._loaded)throw new Error("not loaded");return!!this._canProduce[e]},fe.prototype.createSendTransport=function(e){if(!this._loaded)throw new Error("not loaded");var t=this._handlerFactory(),n="boolean"==typeof e.iceServers?[]:e.iceServers||[],r=e.id;if(!r)throw new TypeError("no id given");var i=e.iceParameters,o=e.iceCandidates,s=e.dtlsParameters,a=e.sctpParameters,c=e.iceServerOverrides,u=void 0===c?[]:c;return new me.exports(r,"send",this._extendedRtpCapabilities,this._canProduce,this._sctpCapabilities,this._handlerName||"Chrome70",t,i,o,n,s,a,u)},fe.prototype.createRecvTransport=function(e){if(!this._loaded)throw new Error("not loaded");var t=this._handlerFactory(),n=e.id;if(!n)throw new TypeError("no id given");return new me.exports(n,"recv",this._extendedRtpCapabilities,this._canProduce,this._sctpCapabilities,this._handlerName||"Chrome70",t,e.iceParameters,e.iceCandidates,e.iceServers||[],e.dtlsParameters,e.sctpParameters,e.iceServerOverrides||[])};var he="_mediaObject",pe="_observer",ge=function(){function e(){this[pe]=new ve.EnhancedEventEmitter}var t=e.prototype;return t.on=function(e,t){return this[pe].on(e,t)},t.off=function(e,t){this[pe].off(e,t)},t.once=function(e,t){this[pe].once(e,t)},t.safeEmit=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this[pe]).safeEmit.apply(t,[e].concat(r))},t.safeEmitAsPromise=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this[pe]).safeEmitAsPromise.apply(t,[e].concat(r))},Object.defineProperty(e.prototype,"observer",{get:function(){return this[pe]}}),e}();function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach(function(t){ye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}me.exports=(function(){function e(e,t,r,i,o,s,a,c,u,l,d,f,h){ge.call(this),this._closed=!1,this._direction=void 0,this._extendedRtpCapabilities=void 0,this._canProduce=void 0,this._sctpCapabilities=void 0,this._handlerName=void 0,this._Handler=void 0,this._handlerInstance=void 0,this._connectionState="new",this._observer=new ve.EnhancedEventEmitter,this._id=e,this._direction=t,this._extendedRtpCapabilities=r,this._canProduce=i,this._sctpCapabilities=o,this._handlerName=s,this._Handler=a,this._iceParameters=c,this._iceCandidates=u,this._iceServers=l,this._dtlsParameters=d,this._sctpParameters=f,this._iceServerOverrides=h,this._handlerInstance=new this._Handler({direction:this._direction,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduce:this._canProduce,sctpCapabilities:this._sctpCapabilities,iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,iceServers:this._iceServers,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,iceServerOverrides:this._iceServerOverrides}),this._handlerInstance.on("@connectionstatechange",this._onConnectionStateChange.bind(this))}var t=e.prototype=Object.create(ge.prototype);return t.constructor=e,Object.defineProperty(t,"id",{get:function(){return this._id}}),Object.defineProperty(t,"closed",{get:function(){return this._closed}}),Object.defineProperty(t,"direction",{get:function(){return this._direction}}),Object.defineProperty(t,"handlerName",{get:function(){return this._handlerName}}),Object.defineProperty(t,"connectionState",{get:function(){return this._connectionState}}),t.close=function(){this._closed||(this._closed=!0,this._handlerInstance&&this._handlerInstance.close(),this.safeEmit("close"),this._observer.safeEmit("close"))},t.getStats=function(){if(this._closed)throw new Error("closed");return this._handlerInstance.getTransportStats()},t.restartIce=function(e){if(this._closed)throw new Error("closed");null==e&&(e=this._iceParameters),this._handlerInstance.restartIce(e)},t.updateIceServers=function(e){if(this._closed)throw new Error("closed");this._handlerInstance.updateIceServers(e)},t._onConnectionStateChange=function(e){this._connectionState=e,this.safeEmit("connectionstatechange",e),this._observer.safeEmit("connectionstatechange",e)},Object.defineProperty(t,"observer",{get:function(){return this._observer}}),e}());var we={},Se=Object.freeze({__proto__:null,get EnhancedEventEmitter(){return ve.EnhancedEventEmitter},get Transport(){return me.exports}}),Ee={Chrome70:function(){return null},Chrome74:function(){return null},Chrome75:function(){return null},Chrome76:function(){return null},Chrome77:function(){return null},Chrome78:function(){return null},Chrome79:function(){return null},Chrome80:function(){return null},Chrome81:function(){return null},Chrome83:function(){return null},Chrome84:function(){return null},Chrome85:function(){return null},Chrome86:function(){return null},Chrome87:function(){return null},Chrome88:function(){return null},Chrome89:function(){return null},Chrome90:function(){return null},Chrome91:function(){return null},Chrome92:function(){return null},Chrome93:function(){return null},Chrome94:function(){return null},Firefox60:function(){return null},Firefox63:function(){return null},Firefox65:function(){return null},Safari12:function(){return null},Safari12L:function(){return null},Safari13:function(){return null},Safari13L:function(){return null},Edge11:function(){return null},Edge76:function(){return null},ReactNative:function(){return null},aiortc:function(){return null}},_e={};function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function Ce(e){return function(){var t,n=Oe(e);if(Ae()){var r=Oe(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return xe(this,t)}}function xe(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?be(e):t}function ke(e){var t="function"==typeof Map?new Map:void 0;return ke=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Pe(e,arguments,Oe(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Te(r,e)},ke(e)}function Le(e,t){return!1!==t&&!!(e.prototype&&e.prototype.isPrototypeOf(t))}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t,n){return(Pe=Ae()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Te(i,n.prototype),i}).apply(null,arguments)}function Ne(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return be(e)}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-->0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Me(e){var t=He;return function(){var n,r=Ie(e);if(t){var i=Ie(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ne(this,n)}}function Ue(e){return e>=1&&e<=6}function Be(e){return e>=1&&e<=6}function Fe(e){return e>=1&&e<=6}var Ge="3.6.45";function ze(e){var t=e.split("_")[2];if(!t)return{};var n=/^L(?<layers>\d+)T(?<temporal>\d+)$/u.exec(t);if(!n)return{};var r=n.groups.layers?parseInt(n.groups.layers,10):void 0,i=n.groups.temporal?parseInt(n.groups.temporal,10):void 0;return{spatialLayers:r,temporalLayers:i}}return Object.defineProperty(we,"__esModule",{value:!0}),Object.defineProperty(we,"Chrome70",{value:Ee.Chrome70}),Object.defineProperty(we,"Chrome74",{value:Ee.Chrome74}),Object.defineProperty(we,"Chrome75",{value:Ee.Chrome75}),Object.defineProperty(we,"Chrome76",{value:Ee.Chrome76}),Object.defineProperty(we,"Chrome77",{value:Ee.Chrome77}),Object.defineProperty(we,"Chrome78",{value:Ee.Chrome78}),Object.defineProperty(we,"Chrome79",{value:Ee.Chrome79}),Object.defineProperty(we,"Chrome80",{value:Ee.Chrome80}),Object.defineProperty(we,"Chrome81",{value:Ee.Chrome81}),Object.defineProperty(we,"Chrome83",{value:Ee.Chrome83}),Object.defineProperty(we,"Chrome84",{value:Ee.Chrome84}),Object.defineProperty(we,"Chrome85",{value:Ee.Chrome85}),Object.defineProperty(we,"Chrome86",{value:Ee.Chrome86}),Object.defineProperty(we,"Chrome87",{value:Ee.Chrome87}),Object.defineProperty(we,"Chrome88",{value:Ee.Chrome88}),Object.defineProperty(we,"Chrome89",{value:Ee.Chrome89}),Object.defineProperty(we,"Chrome90",{value:Ee.Chrome90}),Object.defineProperty(we,"Chrome91",{value:Ee.Chrome91}),Object.defineProperty(we,"Chrome92",{value:Ee.Chrome92}),Object.defineProperty(we,"Chrome93",{value:Ee.Chrome93}),Object.defineProperty(we,"Chrome94",{value:Ee.Chrome94}),Object.defineProperty(we,"Firefox60",{value:Ee.Firefox60}),Object.defineProperty(we,"Firefox63",{value:Ee.Firefox63}),Object.defineProperty(we,"Firefox65",{value:Ee.Firefox65}),Object.defineProperty(we,"Safari12",{value:Ee.Safari12}),Object.defineProperty(we,"Safari12L",{value:Ee.Safari12L}),Object.defineProperty(we,"Safari13",{value:Ee.Safari13}),Object.defineProperty(we,"Safari13L",{value:Ee.Safari13L}),Object.defineProperty(we,"Edge11",{value:Ee.Edge11}),Object.defineProperty(we,"Edge76",{value:Ee.Edge76}),Object.defineProperty(we,"ReactNative",{value:Ee.ReactNative}),Object.defineProperty(we,"aiortc",{value:Ee.aiortc}),Object.defineProperty(we,"version",{value:Ge}),Object.defineProperty(we,"handlers",{value:Ee}),Object.defineProperty(we,"unsupportedHandler",{value:_e}),Object.defineProperty(we,"__fro",{value:Se}),Object.defineProperty(we,"Device",{value:fe}),Object.defineProperty(we,"parseScalabilityMode",{value:ze}),we.default=fe,Object.defineProperty(we,"__esModule",{value:!0}),Object.defineProperty(we,"__export_format",{value:"esm"}),Object.defineProperty(we,"__export_platform",{value:"browser"}),function(e){return e.exports=we}(we),we});
